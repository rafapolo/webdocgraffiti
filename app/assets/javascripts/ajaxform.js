/*!
 * jQuery Form Plugin
 * version: 2.87 (20-OCT-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(c){function m(){if(c.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}c.fn.ajaxSubmit=function(a){function g(b){function g(){function a(){try{var b=(n.contentWindow?n.contentWindow.document:n.contentDocument?n.contentDocument:n.document).readyState;m("state = "+b);b.toLowerCase()=="uninitialized"&&setTimeout(a,50)}catch(c){m("Server abort: ",
c," (",c.name,")"),k(v),s&&clearTimeout(s),s=void 0}}var b=h.attr("target"),f=h.attr("action");e.setAttribute("target",p);j||e.setAttribute("method","POST");f!=d.url&&e.setAttribute("action",d.url);!d.skipEncodingOverride&&(!j||/post/i.test(j))&&h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});d.timeout&&(s=setTimeout(function(){t=true;k(x)},d.timeout));var i=[];try{if(d.extraData)for(var l in d.extraData)i.push(c('<input type="hidden" name="'+l+'" />').attr("value",d.extraData[l]).appendTo(e)[0]);
d.iframeTarget||(q.appendTo("body"),n.attachEvent?n.attachEvent("onload",k):n.addEventListener("load",k,false));setTimeout(a,15);e.submit()}finally{e.setAttribute("action",f),b?e.setAttribute("target",b):h.removeAttr("target"),c(i).remove()}}function k(a){if(!f.aborted&&!y){try{o=n.contentWindow?n.contentWindow.document:n.contentDocument?n.contentDocument:n.document}catch(b){m("cannot access response document: ",b),a=v}if(a===x&&f)f.abort("timeout");else if(a==v&&f)f.abort("server abort");else if(o&&
o.location.href!=d.iframeSrc||t){n.detachEvent?n.detachEvent("onload",k):n.removeEventListener("load",k,false);var a="success",e;try{if(t)throw"timeout";var h=d.dataType=="xml"||o.XMLDocument||c.isXMLDoc(o);m("isXml="+h);if(!h&&window.opera&&(o.body==null||o.body.innerHTML=="")&&--B){m("requeing onLoad callback, DOM not available");setTimeout(k,250);return}var g=o.body?o.body:o.documentElement;f.responseText=g?g.innerHTML:null;f.responseXML=o.XMLDocument?o.XMLDocument:o;if(h)d.dataType="xml";f.getResponseHeader=
function(a){return{"content-type":d.dataType}[a]};if(g)f.status=Number(g.getAttribute("status"))||f.status,f.statusText=g.getAttribute("statusText")||f.statusText;var i=(d.dataType||"").toLowerCase(),j=/(json|script|text)/.test(i);if(j||d.textarea){var l=o.getElementsByTagName("textarea")[0];if(l)f.responseText=l.value,f.status=Number(l.getAttribute("status"))||f.status,f.statusText=l.getAttribute("statusText")||f.statusText;else if(j){var p=o.getElementsByTagName("pre")[0],u=o.getElementsByTagName("body")[0];
if(p)f.responseText=p.textContent?p.textContent:p.innerText;else if(u)f.responseText=u.textContent?u.textContent:u.innerText}}else if(i=="xml"&&!f.responseXML&&f.responseText!=null)f.responseXML=C(f.responseText);try{z=D(f,i,d)}catch(A){a="parsererror",f.error=e=A||a}}catch(w){m("error caught: ",w),a="error",f.error=e=w||a}f.aborted&&(m("upload aborted"),a=null);f.status&&(a=f.status>=200&&f.status<300||f.status===304?"success":"error");if(a==="success")d.success&&d.success.call(d.context,z,"success",
f),r&&c.event.trigger("ajaxSuccess",[f,d]);else if(a){if(e==void 0)e=f.statusText;d.error&&d.error.call(d.context,f,a,e);r&&c.event.trigger("ajaxError",[f,d,e])}r&&c.event.trigger("ajaxComplete",[f,d]);r&&!--c.active&&c.event.trigger("ajaxStop");d.complete&&d.complete.call(d.context,f,a);y=true;d.timeout&&clearTimeout(s);setTimeout(function(){d.iframeTarget||q.remove();f.responseXML=null},100)}}}var e=h[0],i,l,d,r,p,q,n,f,t,s;i=!!c.fn.prop;if(b)if(i)for(l=0;l<b.length;l++)i=c(e[b[l].name]),i.prop("disabled",
false);else for(l=0;l<b.length;l++)i=c(e[b[l].name]),i.removeAttr("disabled");if(c(":input[name=submit],:input[id=submit]",e).length)alert('Error: Form elements must not have name or id of "submit".');else if(d=c.extend(true,{},c.ajaxSettings,a),d.context=d.context||d,p="jqFormIO"+(new Date).getTime(),d.iframeTarget?(q=c(d.iframeTarget),i=q.attr("name"),i==null?q.attr("name",p):p=i):(q=c('<iframe name="'+p+'" src="'+d.iframeSrc+'" />'),q.css({position:"absolute",top:"-1000px",left:"-1000px"})),n=
q[0],f={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(a){var b=a==="timeout"?"timeout":"aborted";m("aborting upload... "+b);this.aborted=1;q.attr("src",d.iframeSrc);f.error=b;d.error&&d.error.call(d.context,f,b,a);r&&c.event.trigger("ajaxError",[f,d,b]);d.complete&&d.complete.call(d.context,f,b)}},(r=d.global)&&!c.active++&&c.event.trigger("ajaxStart"),r&&c.event.trigger("ajaxSend",
[f,d]),d.beforeSend&&d.beforeSend.call(d.context,f,d)===false)d.global&&c.active--;else if(!f.aborted){if(b=e.clk)if((i=b.name)&&!b.disabled)if(d.extraData=d.extraData||{},d.extraData[i]=b.value,b.type=="image")d.extraData[i+".x"]=e.clk_x,d.extraData[i+".y"]=e.clk_y;var x=1,v=2;d.forceSync?g():setTimeout(g,10);var z,o,B=50,y,C=c.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&
b.documentElement&&b.documentElement.nodeName!="parsererror"?b:null},E=c.parseJSON||function(a){return window.eval("("+a+")")},D=function(a,b,d){var e=a.getResponseHeader("content-type")||"",f=b==="xml"||!b&&e.indexOf("xml")>=0,a=f?a.responseXML:a.responseText;f&&a.documentElement.nodeName==="parsererror"&&c.error&&c.error("parsererror");d&&d.dataFilter&&(a=d.dataFilter(a,b));typeof a==="string"&&(b==="json"||!b&&e.indexOf("json")>=0?a=E(a):(b==="script"||!b&&e.indexOf("javascript")>=0)&&c.globalEval(a));
return a}}}if(!this.length)return m("ajaxSubmit: skipping submit process - no element selected"),this;var j,b,h=this;typeof a=="function"&&(a={success:a});j=this.attr("method");b=this.attr("action");(b=(b=typeof b==="string"?c.trim(b):"")||window.location.href||"")&&(b=(b.match(/^([^#]+)/)||[])[1]);a=c.extend(true,{url:b,success:c.ajaxSettings.success,type:j||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);b={};this.trigger("form-pre-serialize",[this,
a,b]);if(b.veto)return m("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&a.beforeSerialize(this,a)===false)return m("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var k=a.traditional;if(k===void 0)k=c.ajaxSettings.traditional;var e,i=this.formToArray(a.semantic);if(a.data)a.extraData=a.data,e=c.param(a.data,k);if(a.beforeSubmit&&a.beforeSubmit(i,this,a)===false)return m("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",
[i,this,a,b]);if(b.veto)return m("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;b=c.param(i,k);e&&(b=b?b+"&"+e:e);a.type.toUpperCase()=="GET"?(a.url+=(a.url.indexOf("?")>=0?"&":"?")+b,a.data=null):a.data=b;var l=[];a.resetForm&&l.push(function(){h.resetForm()});a.clearForm&&l.push(function(){h.clearForm(a.includeHidden)});if(!a.dataType&&a.target){var t=a.success||function(){};l.push(function(b){var e=a.replaceTarget?"replaceWith":"html";c(a.target)[e](b).each(t,arguments)})}else a.success&&
l.push(a.success);a.success=function(b,c,e){for(var g=a.context||a,i=0,k=l.length;i<k;i++)l[i].apply(g,[b,c,e||h,h])};e=c("input:file",this).length>0;b=h.attr("enctype")=="multipart/form-data"||h.attr("encoding")=="multipart/form-data";if(a.iframe!==false&&(e||a.iframe||b))a.closeKeepAlive?c.get(a.closeKeepAlive,function(){g(i)}):g(i);else{if(c.browser.msie&&j=="get"&&typeof a.type==="undefined"&&(e=h[0].getAttribute("method"),typeof e==="string"))a.type=e;c.ajax(a)}this.trigger("form-submit-notify",
[this,a]);return this};c.fn.ajaxForm=function(a){if(this.length===0){var g=this.selector,j=this.context;if(!c.isReady&&g)return m("DOM not ready, queuing ajaxForm"),c(function(){c(g,j).ajaxForm(a)}),this;m("terminating; zero elements found by selector"+(c.isReady?"":" (DOM not ready)"));return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){b.isDefaultPrevented()||(b.preventDefault(),c(this).ajaxSubmit(a))}).bind("click.form-plugin",function(a){var h=a.target,g=c(h);if(!g.is(":submit,input:image")){h=
g.closest(":submit");if(h.length==0)return;h=h[0]}var e=this;e.clk=h;if(h.type=="image")a.offsetX!=void 0?(e.clk_x=a.offsetX,e.clk_y=a.offsetY):typeof c.fn.offset=="function"?(g=g.offset(),e.clk_x=a.pageX-g.left,e.clk_y=a.pageY-g.top):(e.clk_x=a.pageX-h.offsetLeft,e.clk_y=a.pageY-h.offsetTop);setTimeout(function(){e.clk=e.clk_x=e.clk_y=null},100)})};c.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};c.fn.formToArray=function(a){var g=[];if(this.length===0)return g;
var j=this[0],b=a?j.getElementsByTagName("*"):j.elements;if(!b)return g;var h,k,e,i,l,m;for(h=0,l=b.length;h<l;h++)if(k=b[h],e=k.name)if(a&&j.clk&&k.type=="image")!k.disabled&&j.clk==k&&(g.push({name:e,value:c(k).val()}),g.push({name:e+".x",value:j.clk_x},{name:e+".y",value:j.clk_y}));else if((i=c.fieldValue(k,true))&&i.constructor==Array)for(k=0,m=i.length;k<m;k++)g.push({name:e,value:i[k]});else i!==null&&typeof i!="undefined"&&g.push({name:e,value:i});if(!a&&j.clk&&(a=c(j.clk),b=a[0],(e=b.name)&&
!b.disabled&&b.type=="image"))g.push({name:e,value:a.val()}),g.push({name:e+".x",value:j.clk_x},{name:e+".y",value:j.clk_y});return g};c.fn.formSerialize=function(a){return c.param(this.formToArray(a))};c.fn.fieldSerialize=function(a){var g=[];this.each(function(){var j=this.name;if(j){var b=c.fieldValue(this,a);if(b&&b.constructor==Array)for(var h=0,k=b.length;h<k;h++)g.push({name:j,value:b[h]});else b!==null&&typeof b!="undefined"&&g.push({name:this.name,value:b})}});return c.param(g)};c.fn.fieldValue=
function(a){for(var g=[],j=0,b=this.length;j<b;j++){var h=c.fieldValue(this[j],a);h===null||typeof h=="undefined"||h.constructor==Array&&!h.length||(h.constructor==Array?c.merge(g,h):g.push(h))}return g};c.fieldValue=function(a,g){var j=a.name,b=a.type,h=a.tagName.toLowerCase();g===void 0&&(g=true);if(g&&(!j||a.disabled||b=="reset"||b=="button"||(b=="checkbox"||b=="radio")&&!a.checked||(b=="submit"||b=="image")&&a.form&&a.form.clk!=a||h=="select"&&a.selectedIndex==-1))return null;if(h=="select"){var k=
a.selectedIndex;if(k<0)return null;for(var j=[],h=a.options,e=(b=b=="select-one")?k+1:h.length,k=b?k:0;k<e;k++){var i=h[k];if(i.selected){var l=i.value;l||(l=i.attributes&&i.attributes.value&&!i.attributes.value.specified?i.text:i.value);if(b)return l;j.push(l)}}return j}return c(a).val()};c.fn.clearForm=function(a){return this.each(function(){c("input,select,textarea",this).clearFields(a)})};c.fn.clearFields=c.fn.clearInputs=function(a){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;
return this.each(function(){var j=this.type,b=this.tagName.toLowerCase();if(c.test(j)||b=="textarea"||a&&/hidden/.test(j))this.value="";else if(j=="checkbox"||j=="radio")this.checked=false;else if(b=="select")this.selectedIndex=-1})};c.fn.resetForm=function(){return this.each(function(){(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType)&&this.reset()})};c.fn.enable=function(a){a===void 0&&(a=true);return this.each(function(){this.disabled=!a})};c.fn.selected=function(a){a===
void 0&&(a=true);return this.each(function(){var g=this.type;if(g=="checkbox"||g=="radio")this.checked=a;else if(this.tagName.toLowerCase()=="option")g=c(this).parent("select"),a&&g[0]&&g[0].type=="select-one"&&g.find("option").selected(false),this.selected=a})};c.fn.ajaxSubmit.debug=false})(jQuery);