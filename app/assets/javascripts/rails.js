(function(d,h){var b;d.rails=b={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not(button[type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",
requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(a){var c=d('meta[name="csrf-token"]').attr("content");c&&a.setRequestHeader("X-CSRF-Token",c)},fire:function(a,c,b){c=d.Event(c);a.trigger(c,b);return!1!==c.result},confirm:function(a){return confirm(a)},ajax:function(a){return d.ajax(a)},href:function(a){return a.attr("href")},handleRemote:function(a){var c,
f,e,g,i;if(b.fire(a,"ajax:before")){g=a.data("cross-domain")||null;i=a.data("type")||d.ajaxSettings&&d.ajaxSettings.dataType;if(a.is("form")){c=a.attr("method");f=a.attr("action");e=a.serializeArray();var j=a.data("ujs:submit-button");j&&(e.push(j),a.data("ujs:submit-button",null))}else a.is(b.inputChangeSelector)?(c=a.data("method"),f=a.data("url"),e=a.serialize(),a.data("params")&&(e=e+"&"+a.data("params"))):(c=a.data("method"),f=b.href(a),e=a.data("params")||null);c={type:c||"GET",data:e,dataType:i,
crossDomain:g,beforeSend:function(c,d){d.dataType===h&&c.setRequestHeader("accept","*/*;q=0.5, "+d.accepts.script);return b.fire(a,"ajax:beforeSend",[c,d])},success:function(c,b,d){a.trigger("ajax:success",[c,b,d])},complete:function(c,b){a.trigger("ajax:complete",[c,b])},error:function(c,b,d){a.trigger("ajax:error",[c,b,d])}};f&&(c.url=f);return b.ajax(c)}return!1},handleMethod:function(a){var c=b.href(a),f=a.data("method"),a=a.attr("target"),e=d("meta[name=csrf-token]").attr("content"),g=d("meta[name=csrf-param]").attr("content"),
c=d('<form method="post" action="'+c+'"></form>'),f='<input name="_method" value="'+f+'" type="hidden" />';g!==h&&e!==h&&(f+='<input name="'+g+'" value="'+e+'" type="hidden" />');a&&c.attr("target",a);c.hide().append(f).appendTo("body");c.submit()},disableFormElements:function(a){a.find(b.disableSelector).each(function(){var a=d(this),b=a.is("button")?"html":"val";a.data("ujs:enable-with",a[b]());a[b](a.data("disable-with"));a.prop("disabled",!0)})},enableFormElements:function(a){a.find(b.enableSelector).each(function(){var a=
d(this),b=a.is("button")?"html":"val";if(a.data("ujs:enable-with"))a[b](a.data("ujs:enable-with"));a.prop("disabled",!1)})},allowAction:function(a){var c=a.data("confirm"),d=!1,e;if(!c)return!0;b.fire(a,"confirm")&&(d=b.confirm(c),e=b.fire(a,"confirm:complete",[d]));return d&&e},blankInputs:function(a,c,b){var e=d(),g;a.find(c||"input,textarea").each(function(){g=d(this);if(b?g.val():!g.val())e=e.add(g)});return e.length?e:!1},nonBlankInputs:function(a,c){return b.blankInputs(a,c,!0)},stopEverything:function(a){d(a.target).trigger("ujs:everythingStopped");
a.stopImmediatePropagation();return!1},callFormSubmitBindings:function(a,c){var b=a.data("events"),e=!0;b!==h&&b.submit!==h&&d.each(b.submit,function(a,b){if("function"===typeof b.handler)return e=b.handler(c)});return e},disableElement:function(a){a.data("ujs:enable-with",a.html());a.html(a.data("disable-with"));a.bind("click.railsDisable",function(a){return b.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==h&&(a.html(a.data("ujs:enable-with")),a.data("ujs:enable-with",
!1));a.unbind("click.railsDisable")}};d.ajaxPrefilter(function(a,c,d){a.crossDomain||b.CSRFProtection(d)});d(document).delegate(b.linkDisableSelector,"ajax:complete",function(){b.enableElement(d(this))});d(document).delegate(b.linkClickSelector,"click.rails",function(a){var c=d(this),f=c.data("method"),e=c.data("params");if(!b.allowAction(c))return b.stopEverything(a);c.is(b.linkDisableSelector)&&b.disableElement(c);if(c.data("remote")!==h){if((a.metaKey||a.ctrlKey)&&(!f||"GET"===f)&&!e)return!0;
!1===b.handleRemote(c)&&b.enableElement(c);return!1}if(c.data("method"))return b.handleMethod(c),!1});d(document).delegate(b.inputChangeSelector,"change.rails",function(a){var c=d(this);if(!b.allowAction(c))return b.stopEverything(a);b.handleRemote(c);return!1});d(document).delegate(b.formSubmitSelector,"submit.rails",function(a){var c=d(this),f=c.data("remote")!==h,e=b.blankInputs(c,b.requiredInputSelector),g=b.nonBlankInputs(c,b.fileInputSelector);if(!b.allowAction(c)||e&&c.attr("novalidate")==
h&&b.fire(c,"ajax:aborted:required",[e]))return b.stopEverything(a);if(f){if(g)return b.fire(c,"ajax:aborted:file",[g]);if(!d.support.submitBubbles&&"1.7">d().jquery&&!1===b.callFormSubmitBindings(c,a))return b.stopEverything(a);b.handleRemote(c);return!1}setTimeout(function(){b.disableFormElements(c)},13)});d(document).delegate(b.formInputClickSelector,"click.rails",function(a){var c=d(this);if(!b.allowAction(c))return b.stopEverything(a);a=(a=c.attr("name"))?{name:a,value:c.val()}:null;c.closest("form").data("ujs:submit-button",
a)});d(document).delegate(b.formSubmitSelector,"ajax:beforeSend.rails",function(a){this==a.target&&b.disableFormElements(d(this))});d(document).delegate(b.formSubmitSelector,"ajax:complete.rails",function(a){this==a.target&&b.enableFormElements(d(this))});d(function(){csrf_token=d("meta[name=csrf-token]").attr("content");csrf_param=d("meta[name=csrf-param]").attr("content");d('form input[name="'+csrf_param+'"]').val(csrf_token)})})(jQuery);